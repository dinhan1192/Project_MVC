@model IEnumerable<Project_MVC.Models.LectureVideo>
@using Project_MVC.Models

@{
    ViewBag.Title = "DetailVideos";
    Layout = "~/Views/Shared/_LayoutCustomerPage.cshtml";

    var thisPage = ViewBag.Page as ThisPage;
    var currentCourse = ViewBag.CurrentCourse as Product;
    var lstLectureVideos = ViewBag.ListLectureVideos as List<LectureVideo>;
    var image = currentCourse.ProductImages.OrderByDescending(s => s.CreatedAt).FirstOrDefault();
}

<section class="site-hero overlay" data-stellar-background-ratio="0.5" style="background-image: url(data:image;base64,@System.Convert.ToBase64String(image.ImageData));">
    <div class="container">
        <div class="row align-items-center site-hero-inner justify-content-center">
            <div class="col-md-3 list-group">
                @foreach (var item in lstLectureVideos)
                {
                    var removeFirstDigits = string.Concat(item.Name.SkipWhile(char.IsDigit));
                    var trimFirstEndSpaceChar = removeFirstDigits.Trim(' ');

                    <a href="@Url.Action("DetailVideos", "Lectures", new { page = item.DisplayOrder })"
                       class="list-group-item list-group-item-action" style="color:blue">
                        @trimFirstEndSpaceChar
                    </a>
                }
            </div>
            <div class="col-md-7">
                <div id="watchVideo">
                    @foreach (var item in Model)
                    {
                        var removeFirstDigits = string.Concat(item.Name.SkipWhile(char.IsDigit));
                        var trimFirstEndSpaceChar = removeFirstDigits.Trim(' ');

                        <div id="nameOfVid" style="text-align:center;color:red">@trimFirstEndSpaceChar</div>
                        <div class="video-container">
                            <video controls id="video">
                                <source src="@Url.Action("Video", "Products", new { fileId = item.Id })" type="video/mp4" />
                            </video>
                        </div>

                        <div>
                            <span id="played">0</span> giây đã xem trong tổng
                            <span id="duration"></span> giây.
                        </div>
                    }
                    <div>

                        @if (thisPage.CurrentPage > 1)
                        {
                            <span id="previousVideo">@Html.ActionLink("Previous", "DetailVideos", new { page = thisPage.CurrentPage - 1 }, new { @class = "btn btn-primary" })</span>
                        }
                        @if (thisPage.CurrentPage < thisPage.TotalPage)
                        {
                            <span id="nextVideo">@Html.ActionLink("Next", "DetailVideos", new { page = thisPage.CurrentPage + 1 }, new { @class = "btn btn-primary" })</span>
                        }
                        @if (thisPage.CurrentPage == thisPage.TotalPage)
                        {
                            <span id="back2IndexLectures">@Html.ActionLink("Back to Course", "Index", "Lectures", new { productCode = currentCourse.Code }, new { @class = "btn btn-primary" })</span>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@*<section class="site-hero site-hero-innerpage overlay" data-stellar-background-ratio="0.5" style="background-image: url(/images/big_image_1.jpg);">
        <div class="container">
            <div class="row align-items-center site-hero-inner justify-content-center">
                <div class="col-md-8 text-center">
                    <div class="mb-5 element-animate ">


                    </div>
                </div>
            </div>
        </div>
    </section>*@

<section class="site-section bg-light">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-5 box">
                <h2 class="mb-5">Đánh giá</h2>
                <div class="stars-outer">
                    <div class="stars-inner"></div>
                </div>
            </div>
        </div>
    </div>
</section>

@section scripts{
    @Scripts.Render("~/bundles/video");
}

@section CustomStyles{
    <style>
        /*#watchVideo {
            margin-top: 100px;
        }
        #video{
            margin-top: 1px;
        }
        #nameOfVid{
            margin-bottom: 2px;
        }*/
        #video {
            /*position: absolute;
            z-index: -1;
            top: 0;
            left: 0;*/
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        table {
            margin: 0 auto;
            text-align: center;
            border-collapse: collapse;
            border: 1px solid #d4d4d4;
            font-size: 20px;
            background: #fff;
        }

            table th,
            table tr:nth-child(2n+2) {
                background: #e7e7e7;
            }

            table th,
            table td {
                padding: 20px 50px;
            }

            table th {
                border-bottom: 1px solid #d4d4d4;
            }

        .stars-outer {
            display: inline-block;
            position: relative;
            font-family: FontAwesome;
        }

            .stars-outer::before {
                content: "\f006 \f006 \f006 \f006 \f006";
            }

        .stars-inner {
            position: absolute;
            top: 0;
            left: 0;
            white-space: nowrap;
            overflow: hidden;
            width: 0;
        }

            .stars-inner::before {
                content: "\f005 \f005 \f005 \f005 \f005";
                color: #f8ce0b;
            }
    </style>
}
